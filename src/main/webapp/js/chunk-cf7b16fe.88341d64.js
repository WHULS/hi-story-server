(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cf7b16fe"],{2548:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{attrs:{id:"map"}}),[i("div",{attrs:{id:"markup-type-checkbox"}},[i("el-radio-group",{model:{value:t.markupType,callback:function(e){t.markupType=e},expression:"markupType"}},[i("el-radio",{attrs:{label:"vector",value:"vector"}}),i("el-radio",{attrs:{label:"overlay",value:"overlay"}}),i("el-radio",{attrs:{label:"none",value:"none"}})],1)],1),i("div",{staticStyle:{display:"none"},attrs:{id:"label"}},t._l(t.markerNo,function(e){return i("div",{key:e,staticClass:"marker",attrs:{id:"marker"+e,title:"Marker"}},[i("a",{staticClass:"address",attrs:{id:"address"+e,target:"_blank",href:"http://rsgis.whu.edu.cn"}},[t._v("标注点")])])}),0)]],2)},o=[],a=(i("ea65"),i("48fb"),i("f4e3")),r=i("35cc"),s=i("0470"),h=i("f2b0"),d=i("ed14"),p=i("5810"),c=i("a60a"),l=i.n(c),u=i("b929"),f=i("ed5e"),m=(i("6b82"),i("bf8e")),g=i("9069"),O=i("460b"),T=i("12fb"),y=i("10a7"),b=i("8270"),v=i("4e71"),E=i("f48d"),P={name:"simple-markup",watch:{markupType:function(t,e){console.log(t)}},data:function(){return{map:{},view:{},layers:[],markupType:"vector",beijing:[116.394653,39.911957],wuhan:[114.299011,30.592976],iconFeature:{},VectorSource:{},VectorLayer:{},marker:{},text:{},markerNo:1}},methods:{preDefine:function(){this.view=new a["a"]({center:[114.309654,30.55624],zoom:5,projection:"EPSG:4326"}),this.layers=[new s["a"]({source:new p["a"]})]},createMap:function(){var t=this;this.map=new r["a"]({target:"map",view:this.view,layers:this.layers}),this.map.addControl(new u["a"]({element:l()("#markup-type-checkbox")[0]})),this.map.on("click",function(e){var i=Object(f["g"])(e.coordinate,6),n=e.map.getView().getZoom();t.$notify({message:i+", "+n,type:"success"}),console.log(i),"overlay"===t.markupType?t.addOverlayLabel(e.coordinate):"vector"===t.markupType&&t.addVectorLabel(e.coordinate)})},addIconAndLayer:function(){this.iconFeature=new m["a"]({geometry:new g["a"](this.beijing),name:"北京市",population:2115}),this.iconFeature.setStyle(this.createLabelStyle(this.iconFeature)),this.VectorSource=new d["a"]({features:[this.iconFeature]}),this.VectorLayer=new h["a"]({source:this.VectorSource}),this.map.addLayer(this.VectorLayer);var t=l()("#marker1")[0],e=l()("#address1")[0];e.innerText="武汉市",this.marker=new O["a"]({position:this.wuhan,positioning:"center-center",element:t,stopEvent:!1}),this.text=new O["a"]({position:this.wuhan,element:e}),this.map.addOverlay(this.text),this.map.addOverlay(this.marker)},createLabelStyle:function(t){return new T["c"]({image:new y["a"]({anchor:[.5,60],anchorOrigin:"top-right",anchorXUnits:"fraction",anchorYUnits:"pixels",offsetOrigin:"top-right",opacity:.75,src:"/image/blueIcon.png"}),text:new b["a"]({textAlign:"center",textBaseline:"middle",font:"normal 14px 微软雅黑",text:t.get("name"),fill:new v["a"]({color:"#a30"}),stroke:new E["a"]({color:"#fc3",width:2})})})},addVectorLabel:function(t){var e=new m["a"]({geometry:new g["a"](t),name:"标注点"});e.setStyle(this.createLabelStyle(e)),this.VectorSource.addFeature(e)},addOverlayLabel:function(t){var e=this,i=++this.markerNo;setTimeout(function(n){var o=l()("#marker"+i)[0],a=l()("#address"+i)[0],r=new O["a"]({position:t,positioning:"center-center",element:o,stopEvent:!1}),s=new O["a"]({position:t,element:a});e.map.addOverlay(r),e.map.addOverlay(s),e.map.render()},0)}},mounted:function(){var t=l()(".content-box").css("height");t=t.split("px")[0].toString()+"px",l()("#map").css("height",t),this.preDefine(),this.createMap(),this.addIconAndLayer(),this.addOverlayLabel()}},_=P,w=(i("cf6a"),i("17cc")),N=Object(w["a"])(_,n,o,!1,null,"60a97ec1",null);e["default"]=N.exports},"460b":function(t,e,i){"use strict";var n=i("ee27"),o=i("474e"),a=i("c792"),r=i("12a0"),s=i("4a5e"),h=i("03c9"),d=i("71a8"),p={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"},c=function(t){function e(e){t.call(this),this.options=e,this.id=e.id,this.insertFirst=void 0===e.insertFirst||e.insertFirst,this.stopEvent=void 0===e.stopEvent||e.stopEvent,this.element=document.createElement("div"),this.element.className=void 0!==e.className?e.className:"ol-overlay-container "+r["d"],this.element.style.position="absolute",this.autoPan=void 0!==e.autoPan&&e.autoPan,this.autoPanAnimation=e.autoPanAnimation||{},this.autoPanMargin=void 0!==e.autoPanMargin?e.autoPanMargin:20,this.rendered={bottom_:"",left_:"",right_:"",top_:"",visible:!0},this.mapPostrenderListenerKey=null,Object(h["a"])(this,Object(o["b"])(p.ELEMENT),this.handleElementChanged,this),Object(h["a"])(this,Object(o["b"])(p.MAP),this.handleMapChanged,this),Object(h["a"])(this,Object(o["b"])(p.OFFSET),this.handleOffsetChanged,this),Object(h["a"])(this,Object(o["b"])(p.POSITION),this.handlePositionChanged,this),Object(h["a"])(this,Object(o["b"])(p.POSITIONING),this.handlePositioningChanged,this),void 0!==e.element&&this.setElement(e.element),this.setOffset(void 0!==e.offset?e.offset:[0,0]),this.setPositioning(void 0!==e.positioning?e.positioning:a["a"].TOP_LEFT),void 0!==e.position&&this.setPosition(e.position)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getElement=function(){return this.get(p.ELEMENT)},e.prototype.getId=function(){return this.id},e.prototype.getMap=function(){return this.get(p.MAP)},e.prototype.getOffset=function(){return this.get(p.OFFSET)},e.prototype.getPosition=function(){return this.get(p.POSITION)},e.prototype.getPositioning=function(){return this.get(p.POSITIONING)},e.prototype.handleElementChanged=function(){Object(s["d"])(this.element);var t=this.getElement();t&&this.element.appendChild(t)},e.prototype.handleMapChanged=function(){this.mapPostrenderListenerKey&&(Object(s["e"])(this.element),Object(h["e"])(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);var t=this.getMap();if(t){this.mapPostrenderListenerKey=Object(h["a"])(t,n["a"].POSTRENDER,this.render,this),this.updatePixelPosition();var e=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?e.insertBefore(this.element,e.childNodes[0]||null):e.appendChild(this.element)}},e.prototype.render=function(){this.updatePixelPosition()},e.prototype.handleOffsetChanged=function(){this.updatePixelPosition()},e.prototype.handlePositionChanged=function(){this.updatePixelPosition(),this.get(p.POSITION)&&this.autoPan&&this.panIntoView()},e.prototype.handlePositioningChanged=function(){this.updatePixelPosition()},e.prototype.setElement=function(t){this.set(p.ELEMENT,t)},e.prototype.setMap=function(t){this.set(p.MAP,t)},e.prototype.setOffset=function(t){this.set(p.OFFSET,t)},e.prototype.setPosition=function(t){this.set(p.POSITION,t)},e.prototype.panIntoView=function(){var t=this.getMap();if(t&&t.getTargetElement()){var e=this.getRect(t.getTargetElement(),t.getSize()),i=this.getElement(),n=this.getRect(i,[Object(s["c"])(i),Object(s["b"])(i)]),o=this.autoPanMargin;if(!Object(d["g"])(e,n)){var a=n[0]-e[0],r=e[2]-n[2],h=n[1]-e[1],p=e[3]-n[3],c=[0,0];if(a<0?c[0]=a-o:r<0&&(c[0]=Math.abs(r)+o),h<0?c[1]=h-o:p<0&&(c[1]=Math.abs(p)+o),0!==c[0]||0!==c[1]){var l=t.getView().getCenter(),u=t.getPixelFromCoordinate(l),f=[u[0]+c[0],u[1]+c[1]];t.getView().animate({center:t.getCoordinateFromPixel(f),duration:this.autoPanAnimation.duration,easing:this.autoPanAnimation.easing})}}}},e.prototype.getRect=function(t,e){var i=t.getBoundingClientRect(),n=i.left+window.pageXOffset,o=i.top+window.pageYOffset;return[n,o,n+e[0],o+e[1]]},e.prototype.setPositioning=function(t){this.set(p.POSITIONING,t)},e.prototype.setVisible=function(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)},e.prototype.updatePixelPosition=function(){var t=this.getMap(),e=this.getPosition();if(t&&t.isRendered()&&e){var i=t.getPixelFromCoordinate(e),n=t.getSize();this.updateRenderedPosition(i,n)}else this.setVisible(!1)},e.prototype.updateRenderedPosition=function(t,e){var i=this.element.style,n=this.getOffset(),o=this.getPositioning();this.setVisible(!0);var r=n[0],s=n[1];if(o==a["a"].BOTTOM_RIGHT||o==a["a"].CENTER_RIGHT||o==a["a"].TOP_RIGHT){""!==this.rendered.left_&&(this.rendered.left_=i.left="");var h=Math.round(e[0]-t[0]-r)+"px";this.rendered.right_!=h&&(this.rendered.right_=i.right=h)}else{""!==this.rendered.right_&&(this.rendered.right_=i.right=""),o!=a["a"].BOTTOM_CENTER&&o!=a["a"].CENTER_CENTER&&o!=a["a"].TOP_CENTER||(r-=this.element.offsetWidth/2);var d=Math.round(t[0]+r)+"px";this.rendered.left_!=d&&(this.rendered.left_=i.left=d)}if(o==a["a"].BOTTOM_LEFT||o==a["a"].BOTTOM_CENTER||o==a["a"].BOTTOM_RIGHT){""!==this.rendered.top_&&(this.rendered.top_=i.top="");var p=Math.round(e[1]-t[1]-s)+"px";this.rendered.bottom_!=p&&(this.rendered.bottom_=i.bottom=p)}else{""!==this.rendered.bottom_&&(this.rendered.bottom_=i.bottom=""),o!=a["a"].CENTER_LEFT&&o!=a["a"].CENTER_CENTER&&o!=a["a"].CENTER_RIGHT||(s-=this.element.offsetHeight/2);var c=Math.round(t[1]+s)+"px";this.rendered.top_!=c&&(this.rendered.top_=i.top=c)}},e.prototype.getOptions=function(){return this.options},e}(o["a"]);e["a"]=c},c792:function(t,e,i){"use strict";e["a"]={BOTTOM_LEFT:"bottom-left",BOTTOM_CENTER:"bottom-center",BOTTOM_RIGHT:"bottom-right",CENTER_LEFT:"center-left",CENTER_CENTER:"center-center",CENTER_RIGHT:"center-right",TOP_LEFT:"top-left",TOP_CENTER:"top-center",TOP_RIGHT:"top-right"}},cf6a:function(t,e,i){"use strict";var n=i("fb80"),o=i.n(n);o.a},fb80:function(t,e,i){}}]);
//# sourceMappingURL=chunk-cf7b16fe.88341d64.js.map